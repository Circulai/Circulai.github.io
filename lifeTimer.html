<!DOCTYPE html>
<html>
<head>
    <title>Lebenserwartungsschätzer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: #008000;
        }

        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-gap: 5px;
            text-align: center;
            font-size: 24px;
            /*color: #008000;*/
            padding: 10px;
            border: 2px solid #008000;
            border-radius: 5px;
            background-color: #ffffff;
        }

        .countdown-item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1{
            position: absolute;
            top: 30%;
        }


    </style>
</head>
<body>

    <h1>Geschätze Lebenszeit</h1>

    <div class="countdown-grid">
        <div class="countdown-item">
            <span id="years">0</span>
            <span>Years</span>
        </div>
       <!--  <div class="countdown-item">
            <span>:</span>
        </div> -->
        <div class="countdown-item">
            <span id="days">0</span>
            <span>Days</span>
        </div>
       <!--  <div class="countdown-item">
            <span>:</span>
        </div> -->
        <div class="countdown-item">
            <span id="hours">0</span>
            <span>Hours</span>
        </div>
<!--         <div class="countdown-item">
            <span>:</span>
        </div> -->
        <div class="countdown-item">
            <span id="minutes">0</span>
            <span>Minutes</span>
        </div>
       <!--  <div class="countdown-item">
            <span>:</span>
        </div> -->
        <div class="countdown-item">
            <span id="seconds">0</span>
            <span>Seconds</span>
        </div>
    </div>

    <script>

        // console.log(window.location.search);
        let result = window.location.search;
        // let yearsLeftString = result.split("?result=")[1]
        let deathDateString = result.split("?result=")[1]
        // console.log(deathDateJson);
        let deathDate = new Date(deathDateString);

        console.log(deathDate);

        // let yearsLeft = parseInt(yearsLeftString);

        // console.log(result);
        // console.log(yearsLeftString);
        // console.log(yearsLeft);
        // let timeRemaining = yearsLeft * 365 * 24 * 60 * 60 * 1000;

        // const deathDate = new Date(new Date().getFullYear() + yearsLeft, dob.getMonth(), dob.getDate());

        // document.innerHTML = window.location.search; 
        // Function to update the timer
        function updateTimer() {

            const currentDate = new Date();
            const timeRemaining = deathDate - currentDate;

            console.log(currentDate);
            console.log(timeRemaining);

            // timeRemaining = timeRemaining - 1000;
            

            // Check if the target date has already passed
            if (timeRemaining < 0) {
                document.getElementById("years").innerText = "0";
                document.getElementById("days").innerText = "0";
                document.getElementById("hours").innerText = "0";
                document.getElementById("minutes").innerText = "0";
                document.getElementById("seconds").innerText = "0";
                return;
            }

            const years = Math.floor(timeRemaining / (365 * 24 * 60 * 60 * 1000));
            const days = Math.floor((timeRemaining % (365 * 24 * 60 * 60 * 1000)) / (24 * 60 * 60 * 1000));
            const hours = Math.floor((timeRemaining % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
            const minutes = Math.floor((timeRemaining % (60 * 60 * 1000)) / (60 * 1000));
            const seconds = Math.floor((timeRemaining % (60 * 1000)) / 1000);

            document.getElementById("years").innerText = years;
            document.getElementById("days").innerText = days;
            document.getElementById("hours").innerText = hours;
            document.getElementById("minutes").innerText = minutes;
            document.getElementById("seconds").innerText = seconds;
        }

        // Call the updateTimer function every second
        setInterval(updateTimer, 1000);

        // Initial call to update the timer immediately when the page loads
        updateTimer();
    </script>
</body>
</html>
